<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daru Uni√≥ Plusz Kft - Nyilv√°ntart√≥ Rendszer</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --light-color: #ecf0f1;
            --dark-color: #34495e;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --danger-color: #e74c3c;
            --personnel-color: #3498db;
            --gray-color: #95a5a6;
            --blue-color: #3498db;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, #5c7c9c, #3a506b);
            color: white;
            padding: 1.5rem 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .company-name {
            font-weight: bold;
            font-size: 1.8rem;
            color: #fff;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
        }
        
        .tagline {
            font-size: 1rem;
            opacity: 0.9;
            font-weight: 300;
        }
        
        .nav-menu {
            display: flex;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .nav-button {
            background-color: var(--gray-color);
            color: white;
            text-decoration: none;
            padding: 12px 24px;
            border-radius: 6px;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            cursor: pointer;
            border: none;
            font-size: 1rem;
        }
        
        .nav-button:hover {
            background-color: #7f8c8d;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .nav-button.personnel {
            background-color: var(--blue-color);
        }
        
        .nav-button.personnel:hover {
            background-color: #2980b9;
        }
        
        .nav-button.home {
            background-color: var(--gray-color);
        }
        
        .nav-button.home:hover {
            background-color: #7f8c8d;
        }
        
        .nav-button.active {
            background-color: var(--dark-color);
            box-shadow: 0 0 0 2px white;
        }
        
        .nav-button.export {
            background-color: var(--success-color);
        }
        
        .nav-button.export:hover {
            background-color: #219653;
        }
        
        .nav-button.import {
            background-color: var(--warning-color);
        }
        
        .nav-button.import:hover {
            background-color: #e67e22;
        }
        
        /* F≈ëoldal st√≠lusok */
        .dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }
        
        .card {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            transition: transform 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .card-title {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--blue-color);
            color: var(--primary-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .personnel-card .card-title {
            border-bottom-color: var(--blue-color);
        }
        
        .card-count {
            background-color: var(--warning-color);
            color: white;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9rem;
        }
        
        .summary-cards {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            margin-top: 30px;
        }
        
        .summary-card {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            text-align: center;
            transition: transform 0.3s ease;
        }
        
        .summary-card:hover {
            transform: translateY(-5px);
        }
        
        .summary-card.vehicles {
            border-top: 4px solid var(--blue-color);
        }
        
        .summary-card.personnel {
            border-top: 4px solid var(--blue-color);
        }
        
        .summary-card.expiring {
            border-top: 4px solid var(--warning-color);
        }
        
        .summary-card.expired {
            border-top: 4px solid var(--danger-color);
        }
        
        .summary-number {
            font-size: 2.5rem;
            font-weight: bold;
            margin: 10px 0;
            color: var(--primary-color);
        }
        
        .summary-label {
            color: #7f8c8d;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .page-title {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-size: 2rem;
        }
        
        .page-subtitle {
            color: #7f8c8d;
            margin-bottom: 30px;
            font-size: 1.1rem;
        }
        
        /* J√°rm≈±vek √©s szem√©lyzet st√≠lusok */
        .main-content {
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 20px;
            margin-top: 20px;
        }
        
        .section {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
        }
        
        .section-title {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--blue-color);
            color: var(--primary-color);
        }
        
        .personnel-section .section-title {
            border-bottom-color: var(--blue-color);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark-color);
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
            transition: border 0.3s ease;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--blue-color);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }
        
        .personnel-section input:focus, 
        .personnel-section select:focus, 
        .personnel-section textarea:focus {
            border-color: var(--blue-color);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }
        
        button {
            background-color: var(--blue-color);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        button:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .btn-danger {
            background-color: var(--danger-color);
        }
        
        .btn-danger:hover {
            background-color: #c0392b;
        }
        
        .btn-success {
            background-color: var(--success-color);
        }
        
        .btn-success:hover {
            background-color: #219653;
        }
        
        .btn-personnel {
            background-color: var(--blue-color);
        }
        
        .btn-personnel:hover {
            background-color: #2980b9;
        }
        
        .btn-edit {
            background-color: var(--gray-color);
        }
        
        .btn-edit:hover {
            background-color: #7f8c8d;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        th, td {
            padding: 14px 16px;
            text-align: left;
            border-bottom: 1px solid #e1e1e1;
            vertical-align: middle;
        }
        
        th {
            background-color: var(--light-color);
            font-weight: 600;
            color: var(--primary-color);
            position: sticky;
            top: 0;
        }
        
        tr:hover {
            background-color: #f8f9fa;
        }
        
        .status-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        .status-valid {
            background-color: var(--success-color);
            color: white;
        }
        
        .status-expired {
            background-color: var(--danger-color);
            color: white;
        }
        
        .status-warning {
            background-color: var(--warning-color);
            color: white;
        }
        
        .actions {
            display: flex;
            flex-direction: column;
            gap: 8px;
            align-items: flex-start;
            justify-content: center;
        }
        
        .actions button {
            padding: 8px 12px;
            font-size: 0.8rem;
            white-space: nowrap;
            width: 100%;
            text-align: center;
        }
        
        .search-box {
            margin-bottom: 20px;
            position: relative;
        }
        
        .search-box input {
            padding-left: 40px;
        }
        
        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #7f8c8d;
        }
        
        .tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 20px;
        }
        
        .tab {
            padding: 12px 24px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .tab.active {
            border-bottom: 3px solid var(--blue-color);
            font-weight: 600;
            color: var(--blue-color);
        }
        
        .personnel-tab.active {
            border-bottom-color: var(--blue-color);
            color: var(--blue-color);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .notification {
            padding: 12px 16px;
            border-radius: 6px;
            margin-bottom: 20px;
            display: none;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .notification.success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .notification.error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .expiring-soon {
            background-color: rgba(255, 193, 7, 0.1);
        }
        
        .expired-item {
            background-color: rgba(231, 76, 60, 0.1);
        }
        
        .empty-message {
            text-align: center;
            padding: 40px;
            color: #7f8c8d;
            font-style: italic;
            background-color: #f8f9fa;
            border-radius: 8px;
            margin-top: 20px;
        }
        
        .urgent-item {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { background-color: rgba(255, 193, 7, 0.1); }
            50% { background-color: rgba(255, 193, 7, 0.3); }
            100% { background-color: rgba(255, 193, 7, 0.1); }
        }
        
        /* Szerkeszt√©s m√≥d st√≠lusok */
        .edit-mode {
            background-color: #fff3cd !important;
            border-left: 4px solid var(--warning-color);
        }
        
        .form-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .btn-cancel {
            background-color: var(--gray-color);
        }
        
        .btn-cancel:hover {
            background-color: #7f8c8d;
        }
        
        /* Oldalspecifikus megjelen√≠t√©s */
        .page {
            display: none;
        }
        
        .page.active {
            display: block;
        }
        
        /* J√°rm≈±vek t√°bl√°zat cell√°inak st√≠lusa */
        #vehicles-table td,
        #vehicles-expiring-table td {
            vertical-align: middle;
            padding: 12px 8px;
        }
        
        /* Rendsz√°m cella st√≠lusa */
        #vehicles-table td:first-child,
        #vehicles-expiring-table td:first-child {
            font-weight: bold;
            white-space: nowrap;
        }
        
        @media (max-width: 1200px) {
            #vehicles-table,
            #vehicles-expiring-table {
                font-size: 0.9rem;
            }
            
            .actions button {
                padding: 6px 10px;
                font-size: 0.75rem;
            }
        }
        
        @media (max-width: 992px) {
            #vehicles-table td,
            #vehicles-expiring-table td {
                padding: 10px 6px;
            }
        }
        
        @media (max-width: 768px) {
            .dashboard, .summary-cards, .main-content {
                grid-template-columns: 1fr;
            }
            
            .nav-menu {
                flex-direction: column;
                width: 100%;
            }
            
            .nav-button {
                width: 100%;
                justify-content: center;
            }
            
            .header-content {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .logo-container {
                margin-bottom: 15px;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .tab {
                text-align: center;
            }
            
            .form-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo-container">
                    <div>
                        <div class="company-name">Daru Uni√≥ Plusz Kft</div>
                        <div class="tagline">J√°rm≈±- √©s szem√©lyzet nyilv√°ntart√≥ rendszer</div>
                    </div>
                </div>
                
                <div class="nav-menu">
                    <button class="nav-button home active" data-page="home">
                        F≈ëoldal
                    </button>
                    <button class="nav-button" data-page="vehicles">
                        J√°rm≈±vek
                    </button>
                    <button class="nav-button personnel" data-page="personnel">
                        Szem√©lyzet
                    </button>
                    <button class="nav-button export" id="export-data">
                        Adatok export√°l√°sa
                    </button>
                    <button class="nav-button import" id="import-data">
                        Adatok import√°l√°sa
                    </button>
                </div>
            </div>
        </div>
    </header>
    
    <!-- F≈ëoldal -->
    <div class="container page active" id="home-page">
        <h2 class="page-title">√Åttekint≈ë ir√°ny√≠t√≥pult</h2>
        <p class="page-subtitle">Hamarosan (1 h√≥napon bel√ºl) lej√°r√≥ dokumentumok √∂sszes√≠t√©se</p>
        
        <div class="summary-cards">
            <div class="summary-card vehicles">
                <div class="summary-label">√ñsszes j√°rm≈±</div>
                <div class="summary-number" id="total-vehicles">0</div>
            </div>
            
            <div class="summary-card personnel">
                <div class="summary-label">√ñsszes dolgoz√≥</div>
                <div class="summary-number" id="total-personnel">0</div>
            </div>
            
            <div class="summary-card expiring">
                <div class="summary-label">Hamarosan lej√°r</div>
                <div class="summary-number" id="expiring-soon">0</div>
            </div>
            
            <div class="summary-card expired">
                <div class="summary-label">Lej√°rt</div>
                <div class="summary-number" id="expired">0</div>
            </div>
        </div>
        
        <div class="dashboard">
            <div class="card">
                <div class="card-title">
                    <h3>Hamarosan lej√°r√≥ j√°rm≈± vizsg√°k</h3>
                    <div class="card-count" id="expiring-vehicles-count">0</div>
                </div>
                
                <table id="expiring-vehicles-table">
                    <thead>
                        <tr>
                            <th>Rendsz√°m</th>
                            <th>T√≠pus</th>
                            <th>Lej√°rat</th>
                            <th>Dokumentum</th>
                            <th>St√°tusz</th>
                        </tr>
                    </thead>
                    <tbody id="expiring-vehicles-list">
                        <!-- Hamarosan lej√°r√≥ j√°rm≈±vek list√°ja -->
                    </tbody>
                </table>
                <div class="empty-message" id="no-expiring-vehicles" style="display: none;">
                    Nincsenek hamarosan lej√°r√≥ j√°rm≈± vizsg√°k.
                </div>
            </div>
            
            <div class="card personnel-card">
                <div class="card-title">
                    <h3>Hamarosan lej√°r√≥ szem√©lyzeti dokumentumok</h3>
                    <div class="card-count" id="expiring-personnel-count">0</div>
                </div>
                
                <table id="expiring-personnel-table">
                    <thead>
                        <tr>
                            <th>N√©v</th>
                            <th>Beoszt√°s</th>
                            <th>Lej√°rat</th>
                            <th>Dokumentum</th>
                            <th>St√°tusz</th>
                        </tr>
                    </thead>
                    <tbody id="expiring-personnel-list">
                        <!-- Hamarosan lej√°r√≥ szem√©lyzeti dokumentumok list√°ja -->
                    </tbody>
                </table>
                <div class="empty-message" id="no-expiring-personnel" style="display: none;">
                    Nincsenek hamarosan lej√°r√≥ szem√©lyzeti dokumentumok.
                </div>
            </div>
        </div>
    </div>
    
    <!-- J√°rm≈±vek oldal -->
    <div class="container page" id="vehicles-page">
        <div class="notification success" id="vehicles-success-notification">Sikeres ment√©s!</div>
        <div class="notification error" id="vehicles-error-notification">Hiba t√∂rt√©nt!</div>
        
        <div class="main-content">
            <div class="section">
                <h2 class="section-title" id="vehicles-form-title">√öj j√°rm≈± hozz√°ad√°sa</h2>
                <form id="vehicle-form">
                    <input type="hidden" id="vehicle-edit-id" value="">
                    
                    <div class="form-group">
                        <label for="license-plate">Rendsz√°m *</label>
                        <input type="text" id="license-plate" required placeholder="ABC-123">
                    </div>
                    
                    <div class="form-group">
                        <label for="vehicle-type">J√°rm≈± t√≠pusa *</label>
                        <select id="vehicle-type" required>
                            <option value="">V√°lassz t√≠pust</option>
                            <option value="autodaru">Aut√≥daru</option>
                            <option value="mobil-toronydaru">Mobil toronydaru</option>
                            <option value="toronydaru">Toronydaru</option>
                            <option value="teherauto">Teheraut√≥</option>
                            <option value="kisteher">Kisteher</option>
                            <option value="egyeb">Egy√©b</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="technical-inspection">M≈±szaki vizsga lej√°rata *</label>
                        <input type="date" id="technical-inspection" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="structure-inspection">Szerkezetvizsg√°lat lej√°rata *</label>
                        <input type="date" id="structure-inspection" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="other-inspection">Egy√©b fel√ºlvizsg√°lat lej√°rata</label>
                        <input type="date" id="other-inspection">
                    </div>
                    
                    <div class="form-group">
                        <label for="vehicle-notes">Megjegyz√©sek</label>
                        <textarea id="vehicle-notes" rows="4" placeholder="Egy√©b inform√°ci√≥k a j√°rm≈±vr≈ël..."></textarea>
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn-success" id="vehicle-submit-btn">
                            J√°rm≈± hozz√°ad√°sa
                        </button>
                        <button type="button" class="btn-cancel" id="vehicle-cancel-btn" style="display: none;">
                            M√©gse
                        </button>
                    </div>
                </form>
            </div>
            
            <div class="section">
                <div class="tabs">
                    <div class="tab active" data-tab="all">√ñsszes j√°rm≈±</div>
                    <div class="tab" data-tab="expiring">Hamarosan lej√°r√≥</div>
                </div>
                
                <div class="search-box">
                    <span class="search-icon">üîç</span>
                    <input type="text" id="vehicles-search-input" placeholder="Keres√©s rendsz√°m vagy t√≠pus alapj√°n...">
                </div>
                
                <div class="tab-content active" id="vehicles-all-tab">
                    <h3 class="section-title">√ñsszes j√°rm≈±</h3>
                    <table id="vehicles-table">
                        <thead>
                            <tr>
                                <th>Rendsz√°m</th>
                                <th>T√≠pus</th>
                                <th>M≈±szaki vizsga</th>
                                <th>Szerkezetvizsg√°lat</th>
                                <th>Egy√©b fel√ºlvizsg√°lat</th>
                                <th>M≈±veletek</th>
                            </tr>
                        </thead>
                        <tbody id="vehicles-list">
                            <!-- J√°rm≈±vek list√°ja ide ker√ºl -->
                        </tbody>
                    </table>
                    <div class="empty-message" id="no-vehicles" style="display: none;">
                        Nincsenek j√°rm≈±vek a nyilv√°ntart√°sban.
                    </div>
                </div>
                
                <div class="tab-content" id="vehicles-expiring-tab">
                    <h3 class="section-title">Hamarosan lej√°r√≥ vizsg√°k</h3>
                    <table id="vehicles-expiring-table">
                        <thead>
                            <tr>
                                <th>Rendsz√°m</th>
                                <th>T√≠pus</th>
                                <th>M≈±szaki vizsga</th>
                                <th>Szerkezetvizsg√°lat</th>
                                <th>Egy√©b fel√ºlvizsg√°lat</th>
                                <th>M≈±veletek</th>
                            </tr>
                        </thead>
                        <tbody id="vehicles-expiring-list">
                            <!-- Hamarosan lej√°r√≥ vizsg√°k list√°ja ide ker√ºl -->
                        </tbody>
                    </table>
                    <div class="empty-message" id="no-vehicles-expiring" style="display: none;">
                        Nincsenek hamarosan lej√°r√≥ vizsg√°k.
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Szem√©lyzet oldal -->
    <div class="container page" id="personnel-page">
        <div class="notification success" id="personnel-success-notification">Sikeres ment√©s!</div>
        <div class="notification error" id="personnel-error-notification">Hiba t√∂rt√©nt!</div>
        
        <div class="main-content">
            <div class="section personnel-section">
                <h2 class="section-title" id="personnel-form-title">√öj dolgoz√≥ hozz√°ad√°sa</h2>
                <form id="personnel-form">
                    <input type="hidden" id="personnel-edit-id" value="">
                    
                    <div class="form-group">
                        <label for="person-name">N√©v *</label>
                        <input type="text" id="person-name" required placeholder="Kov√°cs J√°nos">
                    </div>
                    
                    <div class="form-group">
                        <label for="person-position">Beoszt√°s *</label>
                        <select id="person-position" required>
                            <option value="">V√°lassz beoszt√°st</option>
                            <option value="daru-kezel≈ë">Daru kezel≈ë</option>
                            <option value="sof≈ër">Sof≈ër</option>
                            <option value="m≈±szaki vezet≈ë">M≈±szaki vezet≈ë</option>
                            <option value="karbantart√≥">Karbantart√≥</option>
                            <option value="egy√©b">Egy√©b</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="medical-examination">Orvosi vizsg√°lat lej√°rata *</label>
                        <input type="date" id="medical-examination" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="license">Jogos√≠tv√°ny lej√°rata *</label>
                        <input type="date" id="license" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="operator-book">Kezel≈ëi k√∂nyv lej√°rata *</label>
                        <input type="date" id="operator-book" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="personnel-notes">Megjegyz√©sek</label>
                        <textarea id="personnel-notes" rows="4" placeholder="Egy√©b inform√°ci√≥k a dolgoz√≥r√≥l..."></textarea>
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn-personnel" id="personnel-submit-btn">
                            Dolgoz√≥ hozz√°ad√°sa
                        </button>
                        <button type="button" class="btn-cancel" id="personnel-cancel-btn" style="display: none;">
                            M√©gse
                        </button>
                    </div>
                </form>
            </div>
            
            <div class="section personnel-section">
                <div class="tabs">
                    <div class="tab personnel-tab active" data-tab="all">√ñsszes dolgoz√≥</div>
                    <div class="tab personnel-tab" data-tab="expiring">Hamarosan lej√°r√≥</div>
                </div>
                
                <div class="search-box">
                    <span class="search-icon">üîç</span>
                    <input type="text" id="personnel-search-input" placeholder="Keres√©s n√©v vagy beoszt√°s alapj√°n...">
                </div>
                
                <div class="tab-content active" id="personnel-all-tab">
                    <h3 class="section-title">√ñsszes dolgoz√≥</h3>
                    <table id="personnel-table">
                        <thead>
                            <tr>
                                <th>N√©v</th>
                                <th>Beoszt√°s</th>
                                <th>Orvosi vizsg√°lat</th>
                                <th>Jogos√≠tv√°ny</th>
                                <th>Kezel≈ëi k√∂nyv</th>
                                <th>M≈±veletek</th>
                            </tr>
                        </thead>
                        <tbody id="personnel-list">
                            <!-- Szem√©lyzet list√°ja ide ker√ºl -->
                        </tbody>
                    </table>
                    <div class="empty-message" id="no-personnel" style="display: none;">
                        Nincsenek dolgoz√≥k a nyilv√°ntart√°sban.
                    </div>
                </div>
                
                <div class="tab-content" id="personnel-expiring-tab">
                    <h3 class="section-title">Hamarosan lej√°r√≥ dokumentumok</h3>
                    <table id="personnel-expiring-table">
                        <thead>
                            <tr>
                                <th>N√©v</th>
                                <th>Beoszt√°s</th>
                                <th>Orvosi vizsg√°lat</th>
                                <th>Jogos√≠tv√°ny</th>
                                <th>Kezel≈ëi k√∂nyv</th>
                                <th>M≈±veletek</th>
                            </tr>
                        </thead>
                        <tbody id="personnel-expiring-list">
                            <!-- Hamarosan lej√°r√≥ szem√©lyzeti dokumentumok list√°ja ide ker√ºl -->
                        </tbody>
                    </table>
                    <div class="empty-message" id="no-personnel-expiring" style="display: none;">
                        Nincsenek hamarosan lej√°r√≥ szem√©lyzeti dokumentumok.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Rejtett f√°jlfelt√∂lt≈ë import√°l√°shoz -->
    <input type="file" id="file-input" accept=".json" style="display: none;">

    <script>
        // Adatok t√°rol√°sa
        let vehicles = JSON.parse(localStorage.getItem('vehicles')) || [];
        let personnel = JSON.parse(localStorage.getItem('personnel')) || [];
        
        // Szerkeszt√©si √°llapot
        let editingVehicleId = null;
        let editingPersonnelId = null;
        
        // Mintaadatok, ha nincs m√©g adat
        if (vehicles.length === 0) {
            vehicles = [
                {
                    id: "1",
                    licensePlate: "ABC-123",
                    vehicleType: "autodaru",
                    technicalInspection: "2024-12-15",
                    structureInspection: "2024-11-20",
                    otherInspection: "2024-10-05",
                    notes: "Els≈ë aut√≥daru"
                },
                {
                    id: "2",
                    licensePlate: "XYZ-789",
                    vehicleType: "mobil-toronydaru",
                    technicalInspection: "2024-09-30",
                    structureInspection: "2024-10-15",
                    otherInspection: "",
                    notes: "Mobil toronydaru"
                },
                {
                    id: "3",
                    licensePlate: "DEF-456",
                    vehicleType: "toronydaru",
                    technicalInspection: "2024-11-10",
                    structureInspection: "2024-12-05",
                    otherInspection: "2024-10-20",
                    notes: "Toronydaru √©p√≠tkez√©shez"
                }
            ];
            localStorage.setItem('vehicles', JSON.stringify(vehicles));
        }
        
        if (personnel.length === 0) {
            personnel = [
                {
                    id: "1",
                    name: "Kov√°cs J√°nos",
                    position: "daru-kezel≈ë",
                    medicalExamination: "2024-11-10",
                    license: "2026-05-20",
                    operatorBook: "2024-10-25",
                    notes: "Tapasztalt oper√°tor"
                },
                {
                    id: "2", 
                    name: "Nagy P√©ter",
                    position: "sof≈ër",
                    medicalExamination: "2024-09-15",
                    license: "2025-12-31",
                    operatorBook: "2024-08-20",
                    notes: "Teheraut√≥ sof≈ër"
                }
            ];
            localStorage.setItem('personnel', JSON.stringify(personnel));
        }
        
        // Oldal navig√°ci√≥
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Oldal bet√∂ltve');
            
            // Alap√©rtelmezett oldal bet√∂lt√©se
            showPage('home');
            renderHomeDashboard();
            
            // Esem√©nykezel≈ëk be√°ll√≠t√°sa
            setupEventListeners();
        });
        
        function setupEventListeners() {
            console.log('Esem√©nykezel≈ëk be√°ll√≠t√°sa');
            
            // Navig√°ci√≥s gombok
            const navButtons = document.querySelectorAll('.nav-button');
            console.log('Navig√°ci√≥s gombok:', navButtons.length);
            
            navButtons.forEach(button => {
                button.addEventListener('click', function(e) {
                    console.log('Navig√°ci√≥s gomb kattintva:', this.getAttribute('data-page'));
                    const page = this.getAttribute('data-page');
                    if (page) {
                        showPage(page);
                        
                        // Akt√≠v gomb friss√≠t√©se
                        navButtons.forEach(btn => {
                            btn.classList.remove('active');
                        });
                        this.classList.add('active');
                    }
                });
            });
            
            // J√°rm≈±vek ≈±rlap
            document.getElementById('vehicle-form').addEventListener('submit', handleVehicleFormSubmit);
            document.getElementById('vehicle-cancel-btn').addEventListener('click', cancelVehicleEdit);
            
            // Szem√©lyzet ≈±rlap
            document.getElementById('personnel-form').addEventListener('submit', handlePersonnelFormSubmit);
            document.getElementById('personnel-cancel-btn').addEventListener('click', cancelPersonnelEdit);
            
            // J√°rm≈±vek keres√©s
            document.getElementById('vehicles-search-input').addEventListener('input', filterVehicles);
            
            // Szem√©lyzet keres√©s
            document.getElementById('personnel-search-input').addEventListener('input', filterPersonnel);
            
            // J√°rm≈±vek lapok
            const vehicleTabs = document.querySelectorAll('#vehicles-page .tab');
            vehicleTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabName = this.getAttribute('data-tab');
                    switchVehicleTab(tabName);
                });
            });
            
            // Szem√©lyzet lapok
            const personnelTabs = document.querySelectorAll('#personnel-page .tab');
            personnelTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabName = this.getAttribute('data-tab');
                    switchPersonnelTab(tabName);
                });
            });
            
            // Export√°l√°s √©s import√°l√°s gombok
            document.getElementById('export-data').addEventListener('click', exportData);
            document.getElementById('import-data').addEventListener('click', triggerImport);
            document.getElementById('file-input').addEventListener('change', importData);
        }
        
        function showPage(pageName) {
            console.log('Oldal megjelen√≠t√©se:', pageName);
            
            // Minden oldal elrejt√©se
            const pages = document.querySelectorAll('.page');
            pages.forEach(page => {
                page.classList.remove('active');
            });
            
            // Kiv√°lasztott oldal megjelen√≠t√©se
            const activePage = document.getElementById(`${pageName}-page`);
            if (activePage) {
                activePage.classList.add('active');
                
                // Oldal specifikus tartalom bet√∂lt√©se
                switch(pageName) {
                    case 'home':
                        renderHomeDashboard();
                        break;
                    case 'vehicles':
                        renderVehicles();
                        break;
                    case 'personnel':
                        renderPersonnel();
                        break;
                }
            }
        }
        
        function renderHomeDashboard() {
            console.log('Dashboard renderel√©se');
            
            // √ñsszes√≠t≈ë sz√°mok friss√≠t√©se
            document.getElementById('total-vehicles').textContent = vehicles.length;
            document.getElementById('total-personnel').textContent = personnel.length;
            
            // Lej√°r√≥ dokumentumok sz√°mol√°sa
            const today = new Date();
            const nextMonth = new Date();
            nextMonth.setMonth(today.getMonth() + 1);
            
            let expiringCount = 0;
            let expiredCount = 0;
            
            // J√°rm≈±vek lej√°rat√°nak ellen≈ërz√©se
            vehicles.forEach(vehicle => {
                const techInspection = new Date(vehicle.technicalInspection);
                const structureInspection = new Date(vehicle.structureInspection);
                
                if (techInspection < today || structureInspection < today) {
                    expiredCount++;
                } else if (techInspection <= nextMonth || structureInspection <= nextMonth) {
                    expiringCount++;
                }
                
                if (vehicle.otherInspection) {
                    const otherInspection = new Date(vehicle.otherInspection);
                    if (otherInspection < today) {
                        expiredCount++;
                    } else if (otherInspection <= nextMonth) {
                        expiringCount++;
                    }
                }
            });
            
            // Szem√©lyzet lej√°rat√°nak ellen≈ërz√©se
            personnel.forEach(person => {
                const medicalExam = new Date(person.medicalExamination);
                const license = new Date(person.license);
                const operatorBook = new Date(person.operatorBook);
                
                if (medicalExam < today || license < today || operatorBook < today) {
                    expiredCount++;
                } else if (medicalExam <= nextMonth || license <= nextMonth || operatorBook <= nextMonth) {
                    expiringCount++;
                }
            });
            
            document.getElementById('expiring-soon').textContent = expiringCount;
            document.getElementById('expired').textContent = expiredCount;
            
            // Hamarosan lej√°r√≥ j√°rm≈±vek list√°ja
            renderExpiringVehicles();
            
            // Hamarosan lej√°r√≥ szem√©lyzeti dokumentumok list√°ja
            renderExpiringPersonnel();
        }
        
        function renderExpiringVehicles() {
            const listElement = document.getElementById('expiring-vehicles-list');
            const emptyMessage = document.getElementById('no-expiring-vehicles');
            const countElement = document.getElementById('expiring-vehicles-count');
            
            listElement.innerHTML = '';
            
            const today = new Date();
            const nextMonth = new Date();
            nextMonth.setMonth(today.getMonth() + 1);
            
            let expiringVehicles = [];
            
            vehicles.forEach(vehicle => {
                const techInspection = new Date(vehicle.technicalInspection);
                const structureInspection = new Date(vehicle.structureInspection);
                let closestExpiry = null;
                let expiryType = '';
                
                // Legk√∂zelebbi lej√°rat meghat√°roz√°sa
                if (techInspection <= nextMonth && techInspection >= today) {
                    if (!closestExpiry || techInspection < closestExpiry) {
                        closestExpiry = techInspection;
                        expiryType = 'M≈±szaki vizsga';
                    }
                }
                
                if (structureInspection <= nextMonth && structureInspection >= today) {
                    if (!closestExpiry || structureInspection < closestExpiry) {
                        closestExpiry = structureInspection;
                        expiryType = 'Szerkezetvizsg√°lat';
                    }
                }
                
                if (vehicle.otherInspection) {
                    const otherInspection = new Date(vehicle.otherInspection);
                    if (otherInspection <= nextMonth && otherInspection >= today) {
                        if (!closestExpiry || otherInspection < closestExpiry) {
                            closestExpiry = otherInspection;
                            expiryType = 'Egy√©b fel√ºlvizsg√°lat';
                        }
                    }
                }
                
                if (closestExpiry) {
                    expiringVehicles.push({
                        vehicle: vehicle,
                        expiryDate: closestExpiry,
                        expiryType: expiryType
                    });
                }
            });
            
            // Rendez√©s lej√°rat d√°tum szerint
            expiringVehicles.sort((a, b) => a.expiryDate - b.expiryDate);
            
            if (expiringVehicles.length === 0) {
                emptyMessage.style.display = 'block';
                listElement.style.display = 'none';
                countElement.textContent = '0';
            } else {
                emptyMessage.style.display = 'none';
                listElement.style.display = 'table-row-group';
                countElement.textContent = expiringVehicles.length;
                
                expiringVehicles.forEach(item => {
                    const vehicle = item.vehicle;
                    const row = document.createElement('tr');
                    
                    // St√°tusz meghat√°roz√°sa
                    const daysUntilExpiry = Math.ceil((item.expiryDate - today) / (1000 * 60 * 60 * 24));
                    let statusClass = 'status-valid';
                    let statusText = '√ârv√©nyes';
                    
                    if (daysUntilExpiry <= 7) {
                        statusClass = 'status-warning';
                        statusText = 'S√ºrg≈ës';
                        row.classList.add('urgent-item');
                    } else if (daysUntilExpiry <= 30) {
                        statusClass = 'status-warning';
                        statusText = 'Figyelmeztet√©s';
                        row.classList.add('expiring-soon');
                    }
                    
                    row.innerHTML = `
                        <td>${vehicle.licensePlate}</td>
                        <td>${getVehicleTypeName(vehicle.vehicleType)}</td>
                        <td>${formatDate(item.expiryDate)}</td>
                        <td>${item.expiryType}</td>
                        <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                    `;
                    
                    listElement.appendChild(row);
                });
            }
        }
        
        function renderExpiringPersonnel() {
            const listElement = document.getElementById('expiring-personnel-list');
            const emptyMessage = document.getElementById('no-expiring-personnel');
            const countElement = document.getElementById('expiring-personnel-count');
            
            listElement.innerHTML = '';
            
            const today = new Date();
            const nextMonth = new Date();
            nextMonth.setMonth(today.getMonth() + 1);
            
            let expiringPersonnel = [];
            
            personnel.forEach(person => {
                const medicalExam = new Date(person.medicalExamination);
                const license = new Date(person.license);
                const operatorBook = new Date(person.operatorBook);
                let closestExpiry = null;
                let expiryType = '';
                
                // Legk√∂zelebbi lej√°rat meghat√°roz√°sa
                if (medicalExam <= nextMonth && medicalExam >= today) {
                    if (!closestExpiry || medicalExam < closestExpiry) {
                        closestExpiry = medicalExam;
                        expiryType = 'Orvosi vizsg√°lat';
                    }
                }
                
                if (license <= nextMonth && license >= today) {
                    if (!closestExpiry || license < closestExpiry) {
                        closestExpiry = license;
                        expiryType = 'Jogos√≠tv√°ny';
                    }
                }
                
                if (operatorBook <= nextMonth && operatorBook >= today) {
                    if (!closestExpiry || operatorBook < closestExpiry) {
                        closestExpiry = operatorBook;
                        expiryType = 'Kezel≈ëi k√∂nyv';
                    }
                }
                
                if (closestExpiry) {
                    expiringPersonnel.push({
                        person: person,
                        expiryDate: closestExpiry,
                        expiryType: expiryType
                    });
                }
            });
            
            // Rendez√©s lej√°rat d√°tum szerint
            expiringPersonnel.sort((a, b) => a.expiryDate - b.expiryDate);
            
            if (expiringPersonnel.length === 0) {
                emptyMessage.style.display = 'block';
                listElement.style.display = 'none';
                countElement.textContent = '0';
            } else {
                emptyMessage.style.display = 'none';
                listElement.style.display = 'table-row-group';
                countElement.textContent = expiringPersonnel.length;
                
                expiringPersonnel.forEach(item => {
                    const person = item.person;
                    const row = document.createElement('tr');
                    
                    // St√°tusz meghat√°roz√°sa
                    const daysUntilExpiry = Math.ceil((item.expiryDate - today) / (1000 * 60 * 60 * 24));
                    let statusClass = 'status-valid';
                    let statusText = '√ârv√©nyes';
                    
                    if (daysUntilExpiry <= 7) {
                        statusClass = 'status-warning';
                        statusText = 'S√ºrg≈ës';
                        row.classList.add('urgent-item');
                    } else if (daysUntilExpiry <= 30) {
                        statusClass = 'status-warning';
                        statusText = 'Figyelmeztet√©s';
                        row.classList.add('expiring-soon');
                    }
                    
                    row.innerHTML = `
                        <td>${person.name}</td>
                        <td>${getPositionName(person.position)}</td>
                        <td>${formatDate(item.expiryDate)}</td>
                        <td>${item.expiryType}</td>
                        <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                    `;
                    
                    listElement.appendChild(row);
                });
            }
        }
        
        function renderVehicles() {
            console.log('J√°rm≈±vek renderel√©se');
            renderAllVehicles();
            renderExpiringVehiclesList();
        }
        
        function renderAllVehicles() {
            const listElement = document.getElementById('vehicles-list');
            const emptyMessage = document.getElementById('no-vehicles');
            
            listElement.innerHTML = '';
            
            if (vehicles.length === 0) {
                emptyMessage.style.display = 'block';
                listElement.style.display = 'none';
            } else {
                emptyMessage.style.display = 'none';
                listElement.style.display = 'table-row-group';
                
                vehicles.forEach(vehicle => {
                    const row = document.createElement('tr');
                    const today = new Date();
                    
                    // St√°tusz ellen≈ërz√©se
                    const techInspection = new Date(vehicle.technicalInspection);
                    const structureInspection = new Date(vehicle.structureInspection);
                    
                    let techStatus = getStatusBadge(techInspection);
                    let structureStatus = getStatusBadge(structureInspection);
                    let otherStatus = '';
                    
                    if (vehicle.otherInspection) {
                        const otherInspection = new Date(vehicle.otherInspection);
                        otherStatus = getStatusBadge(otherInspection);
                    }
                    
                    row.innerHTML = `
                        <td>${vehicle.licensePlate}</td>
                        <td>${getVehicleTypeName(vehicle.vehicleType)}</td>
                        <td>${formatDate(techInspection)} ${techStatus}</td>
                        <td>${formatDate(structureInspection)} ${structureStatus}</td>
                        <td>${vehicle.otherInspection ? formatDate(new Date(vehicle.otherInspection)) + ' ' + otherStatus : '-'}</td>
                        <td class="actions">
                            <button class="btn-edit" onclick="editVehicle('${vehicle.id}')">Szerkeszt√©s</button>
                            <button class="btn-danger" onclick="deleteVehicle('${vehicle.id}')">T√∂rl√©s</button>
                        </td>
                    `;
                    
                    // Ha b√°rmelyik dokumentum lej√°rt vagy hamarosan lej√°r, jel√∂lj√ºk
                    if (techInspection < today || structureInspection < today || 
                        (vehicle.otherInspection && new Date(vehicle.otherInspection) < today)) {
                        row.classList.add('expired-item');
                    } else if (isExpiringSoon(techInspection) || isExpiringSoon(structureInspection) || 
                              (vehicle.otherInspection && isExpiringSoon(new Date(vehicle.otherInspection)))) {
                        row.classList.add('expiring-soon');
                    }
                    
                    listElement.appendChild(row);
                });
            }
        }
        
        function renderExpiringVehiclesList() {
            const listElement = document.getElementById('vehicles-expiring-list');
            const emptyMessage = document.getElementById('no-vehicles-expiring');
            
            listElement.innerHTML = '';
            
            const today = new Date();
            const nextMonth = new Date();
            nextMonth.setMonth(today.getMonth() + 1);
            
            const expiringVehicles = vehicles.filter(vehicle => {
                const techInspection = new Date(vehicle.technicalInspection);
                const structureInspection = new Date(vehicle.structureInspection);
                
                return (techInspection <= nextMonth && techInspection >= today) ||
                       (structureInspection <= nextMonth && structureInspection >= today) ||
                       (vehicle.otherInspection && new Date(vehicle.otherInspection) <= nextMonth && new Date(vehicle.otherInspection) >= today);
            });
            
            if (expiringVehicles.length === 0) {
                emptyMessage.style.display = 'block';
                listElement.style.display = 'none';
            } else {
                emptyMessage.style.display = 'none';
                listElement.style.display = 'table-row-group';
                
                expiringVehicles.forEach(vehicle => {
                    const row = document.createElement('tr');
                    const techInspection = new Date(vehicle.technicalInspection);
                    const structureInspection = new Date(vehicle.structureInspection);
                    
                    let techStatus = getStatusBadge(techInspection);
                    let structureStatus = getStatusBadge(structureInspection);
                    let otherStatus = '';
                    
                    if (vehicle.otherInspection) {
                        const otherInspection = new Date(vehicle.otherInspection);
                        otherStatus = getStatusBadge(otherInspection);
                    }
                    
                    row.innerHTML = `
                        <td>${vehicle.licensePlate}</td>
                        <td>${getVehicleTypeName(vehicle.vehicleType)}</td>
                        <td>${formatDate(techInspection)} ${techStatus}</td>
                        <td>${formatDate(structureInspection)} ${structureStatus}</td>
                        <td>${vehicle.otherInspection ? formatDate(new Date(vehicle.otherInspection)) + ' ' + otherStatus : '-'}</td>
                        <td class="actions">
                            <button class="btn-edit" onclick="editVehicle('${vehicle.id}')">Szerkeszt√©s</button>
                            <button class="btn-danger" onclick="deleteVehicle('${vehicle.id}')">T√∂rl√©s</button>
                        </td>
                    `;
                    
                    listElement.appendChild(row);
                });
            }
        }
        
        function renderPersonnel() {
            console.log('Szem√©lyzet renderel√©se');
            renderAllPersonnel();
            renderExpiringPersonnelList();
        }
        
        function renderAllPersonnel() {
            const listElement = document.getElementById('personnel-list');
            const emptyMessage = document.getElementById('no-personnel');
            
            listElement.innerHTML = '';
            
            if (personnel.length === 0) {
                emptyMessage.style.display = 'block';
                listElement.style.display = 'none';
            } else {
                emptyMessage.style.display = 'none';
                listElement.style.display = 'table-row-group';
                
                personnel.forEach(person => {
                    const row = document.createElement('tr');
                    const today = new Date();
                    
                    // St√°tusz ellen≈ërz√©se
                    const medicalExam = new Date(person.medicalExamination);
                    const license = new Date(person.license);
                    const operatorBook = new Date(person.operatorBook);
                    
                    let medicalStatus = getStatusBadge(medicalExam);
                    let licenseStatus = getStatusBadge(license);
                    let operatorStatus = getStatusBadge(operatorBook);
                    
                    row.innerHTML = `
                        <td>${person.name}</td>
                        <td>${getPositionName(person.position)}</td>
                        <td>${formatDate(medicalExam)} ${medicalStatus}</td>
                        <td>${formatDate(license)} ${licenseStatus}</td>
                        <td>${formatDate(operatorBook)} ${operatorStatus}</td>
                        <td class="actions">
                            <button class="btn-edit" onclick="editPersonnel('${person.id}')">Szerkeszt√©s</button>
                            <button class="btn-danger" onclick="deletePersonnel('${person.id}')">T√∂rl√©s</button>
                        </td>
                    `;
                    
                    // Ha b√°rmelyik dokumentum lej√°rt vagy hamarosan lej√°r, jel√∂lj√ºk
                    if (medicalExam < today || license < today || operatorBook < today) {
                        row.classList.add('expired-item');
                    } else if (isExpiringSoon(medicalExam) || isExpiringSoon(license) || isExpiringSoon(operatorBook)) {
                        row.classList.add('expiring-soon');
                    }
                    
                    listElement.appendChild(row);
                });
            }
        }
        
        function renderExpiringPersonnelList() {
            const listElement = document.getElementById('personnel-expiring-list');
            const emptyMessage = document.getElementById('no-personnel-expiring');
            
            listElement.innerHTML = '';
            
            const today = new Date();
            const nextMonth = new Date();
            nextMonth.setMonth(today.getMonth() + 1);
            
            const expiringPersonnel = personnel.filter(person => {
                const medicalExam = new Date(person.medicalExamination);
                const license = new Date(person.license);
                const operatorBook = new Date(person.operatorBook);
                
                return (medicalExam <= nextMonth && medicalExam >= today) ||
                       (license <= nextMonth && license >= today) ||
                       (operatorBook <= nextMonth && operatorBook >= today);
            });
            
            if (expiringPersonnel.length === 0) {
                emptyMessage.style.display = 'block';
                listElement.style.display = 'none';
            } else {
                emptyMessage.style.display = 'none';
                listElement.style.display = 'table-row-group';
                
                expiringPersonnel.forEach(person => {
                    const row = document.createElement('tr');
                    const medicalExam = new Date(person.medicalExamination);
                    const license = new Date(person.license);
                    const operatorBook = new Date(person.operatorBook);
                    
                    let medicalStatus = getStatusBadge(medicalExam);
                    let licenseStatus = getStatusBadge(license);
                    let operatorStatus = getStatusBadge(operatorBook);
                    
                    row.innerHTML = `
                        <td>${person.name}</td>
                        <td>${getPositionName(person.position)}</td>
                        <td>${formatDate(medicalExam)} ${medicalStatus}</td>
                        <td>${formatDate(license)} ${licenseStatus}</td>
                        <td>${formatDate(operatorBook)} ${operatorStatus}</td>
                        <td class="actions">
                            <button class="btn-edit" onclick="editPersonnel('${person.id}')">Szerkeszt√©s</button>
                            <button class="btn-danger" onclick="deletePersonnel('${person.id}')">T√∂rl√©s</button>
                        </td>
                    `;
                    
                    listElement.appendChild(row);
                });
            }
        }
        
        function handleVehicleFormSubmit(e) {
            e.preventDefault();
            console.log('J√°rm≈± ≈±rlap elk√ºldve');
            
            const licensePlate = document.getElementById('license-plate').value;
            const vehicleType = document.getElementById('vehicle-type').value;
            const technicalInspection = document.getElementById('technical-inspection').value;
            const structureInspection = document.getElementById('structure-inspection').value;
            const otherInspection = document.getElementById('other-inspection').value;
            const notes = document.getElementById('vehicle-notes').value;
            
            // Valid√°ci√≥
            if (!licensePlate || !vehicleType || !technicalInspection || !structureInspection) {
                showNotification('vehicles-error-notification', 'K√©rj√ºk, t√∂ltse ki az √∂sszes k√∂telez≈ë mez≈ët!');
                return;
            }
            
            const vehicleData = {
                licensePlate,
                vehicleType,
                technicalInspection,
                structureInspection,
                otherInspection: otherInspection || '',
                notes
            };
            
            if (editingVehicleId) {
                // Szerkeszt√©s m√≥d
                updateVehicle(editingVehicleId, vehicleData);
            } else {
                // √öj j√°rm≈± hozz√°ad√°sa
                addVehicle(vehicleData);
            }
        }
        
        function handlePersonnelFormSubmit(e) {
            e.preventDefault();
            console.log('Szem√©lyzet ≈±rlap elk√ºldve');
            
            const name = document.getElementById('person-name').value;
            const position = document.getElementById('person-position').value;
            const medicalExamination = document.getElementById('medical-examination').value;
            const license = document.getElementById('license').value;
            const operatorBook = document.getElementById('operator-book').value;
            const notes = document.getElementById('personnel-notes').value;
            
            // Valid√°ci√≥
            if (!name || !position || !medicalExamination || !license || !operatorBook) {
                showNotification('personnel-error-notification', 'K√©rj√ºk, t√∂ltse ki az √∂sszes k√∂telez≈ë mez≈ët!');
                return;
            }
            
            const personnelData = {
                name,
                position,
                medicalExamination,
                license,
                operatorBook,
                notes
            };
            
            if (editingPersonnelId) {
                // Szerkeszt√©s m√≥d
                updatePersonnel(editingPersonnelId, personnelData);
            } else {
                // √öj szem√©ly hozz√°ad√°sa
                addPersonnel(personnelData);
            }
        }
        
        function addVehicle(vehicleData) {
            const newVehicle = {
                id: generateId(),
                ...vehicleData
            };
            
            vehicles.push(newVehicle);
            localStorage.setItem('vehicles', JSON.stringify(vehicles));
            
            showNotification('vehicles-success-notification', 'J√°rm≈± sikeresen hozz√°adva!');
            resetVehicleForm();
            renderVehicles();
            renderHomeDashboard();
        }
        
        function addPersonnel(personnelData) {
            const newPersonnel = {
                id: generateId(),
                ...personnelData
            };
            
            personnel.push(newPersonnel);
            localStorage.setItem('personnel', JSON.stringify(personnel));
            
            showNotification('personnel-success-notification', 'Dolgoz√≥ sikeresen hozz√°adva!');
            resetPersonnelForm();
            renderPersonnel();
            renderHomeDashboard();
        }
        
        function editVehicle(id) {
            const vehicle = vehicles.find(v => v.id === id);
            if (!vehicle) return;
            
            editingVehicleId = id;
            
            // ≈∞rlap kit√∂lt√©se
            document.getElementById('license-plate').value = vehicle.licensePlate;
            document.getElementById('vehicle-type').value = vehicle.vehicleType;
            document.getElementById('technical-inspection').value = vehicle.technicalInspection;
            document.getElementById('structure-inspection').value = vehicle.structureInspection;
            document.getElementById('other-inspection').value = vehicle.otherInspection;
            document.getElementById('vehicle-notes').value = vehicle.notes;
            
            // ≈∞rlap m√≥dos√≠t√°sa szerkeszt√©s m√≥dra
            document.getElementById('vehicles-form-title').textContent = 'J√°rm≈± szerkeszt√©se';
            document.getElementById('vehicle-submit-btn').textContent = 'Ment√©s';
            document.getElementById('vehicle-cancel-btn').style.display = 'inline-block';
            
            // G√∂rget√©s az ≈±rlaphoz
            document.getElementById('vehicles-page').scrollIntoView({ behavior: 'smooth' });
        }
        
        function editPersonnel(id) {
            const person = personnel.find(p => p.id === id);
            if (!person) return;
            
            editingPersonnelId = id;
            
            // ≈∞rlap kit√∂lt√©se
            document.getElementById('person-name').value = person.name;
            document.getElementById('person-position').value = person.position;
            document.getElementById('medical-examination').value = person.medicalExamination;
            document.getElementById('license').value = person.license;
            document.getElementById('operator-book').value = person.operatorBook;
            document.getElementById('personnel-notes').value = person.notes;
            
            // ≈∞rlap m√≥dos√≠t√°sa szerkeszt√©s m√≥dra
            document.getElementById('personnel-form-title').textContent = 'Dolgoz√≥ szerkeszt√©se';
            document.getElementById('personnel-submit-btn').textContent = 'Ment√©s';
            document.getElementById('personnel-cancel-btn').style.display = 'inline-block';
            
            // G√∂rget√©s az ≈±rlaphoz
            document.getElementById('personnel-page').scrollIntoView({ behavior: 'smooth' });
        }
        
        function updateVehicle(id, vehicleData) {
            const index = vehicles.findIndex(v => v.id === id);
            if (index === -1) return;
            
            vehicles[index] = { ...vehicles[index], ...vehicleData };
            localStorage.setItem('vehicles', JSON.stringify(vehicles));
            
            showNotification('vehicles-success-notification', 'J√°rm≈± sikeresen friss√≠tve!');
            cancelVehicleEdit();
            renderVehicles();
            renderHomeDashboard();
        }
        
        function updatePersonnel(id, personnelData) {
            const index = personnel.findIndex(p => p.id === id);
            if (index === -1) return;
            
            personnel[index] = { ...personnel[index], ...personnelData };
            localStorage.setItem('personnel', JSON.stringify(personnel));
            
            showNotification('personnel-success-notification', 'Dolgoz√≥ sikeresen friss√≠tve!');
            cancelPersonnelEdit();
            renderPersonnel();
            renderHomeDashboard();
        }
        
        function deleteVehicle(id) {
            if (confirm('Biztosan t√∂r√∂lni szeretn√© ezt a j√°rm≈±vet?')) {
                vehicles = vehicles.filter(v => v.id !== id);
                localStorage.setItem('vehicles', JSON.stringify(vehicles));
                
                showNotification('vehicles-success-notification', 'J√°rm≈± sikeresen t√∂r√∂lve!');
                renderVehicles();
                renderHomeDashboard();
            }
        }
        
        function deletePersonnel(id) {
            if (confirm('Biztosan t√∂r√∂lni szeretn√© ezt a dolgoz√≥t?')) {
                personnel = personnel.filter(p => p.id !== id);
                localStorage.setItem('personnel', JSON.stringify(personnel));
                
                showNotification('personnel-success-notification', 'Dolgoz√≥ sikeresen t√∂r√∂lve!');
                renderPersonnel();
                renderHomeDashboard();
            }
        }
        
        function cancelVehicleEdit() {
            editingVehicleId = null;
            resetVehicleForm();
            document.getElementById('vehicles-form-title').textContent = '√öj j√°rm≈± hozz√°ad√°sa';
            document.getElementById('vehicle-submit-btn').textContent = 'J√°rm≈± hozz√°ad√°sa';
            document.getElementById('vehicle-cancel-btn').style.display = 'none';
        }
        
        function cancelPersonnelEdit() {
            editingPersonnelId = null;
            resetPersonnelForm();
            document.getElementById('personnel-form-title').textContent = '√öj dolgoz√≥ hozz√°ad√°sa';
            document.getElementById('personnel-submit-btn').textContent = 'Dolgoz√≥ hozz√°ad√°sa';
            document.getElementById('personnel-cancel-btn').style.display = 'none';
        }
        
        function resetVehicleForm() {
            document.getElementById('vehicle-form').reset();
            document.getElementById('vehicle-edit-id').value = '';
        }
        
        function resetPersonnelForm() {
            document.getElementById('personnel-form').reset();
            document.getElementById('personnel-edit-id').value = '';
        }
        
        function filterVehicles() {
            const searchTerm = document.getElementById('vehicles-search-input').value.toLowerCase();
            const rows = document.querySelectorAll('#vehicles-list tr');
            
            rows.forEach(row => {
                const licensePlate = row.cells[0].textContent.toLowerCase();
                const vehicleType = row.cells[1].textContent.toLowerCase();
                
                if (licensePlate.includes(searchTerm) || vehicleType.includes(searchTerm)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }
        
        function filterPersonnel() {
            const searchTerm = document.getElementById('personnel-search-input').value.toLowerCase();
            const rows = document.querySelectorAll('#personnel-list tr');
            
            rows.forEach(row => {
                const name = row.cells[0].textContent.toLowerCase();
                const position = row.cells[1].textContent.toLowerCase();
                
                if (name.includes(searchTerm) || position.includes(searchTerm)) {
                    row.style.display = '';
                } else {
                    row.style.display = 'none';
                }
            });
        }
        
        function switchVehicleTab(tabName) {
            // Tab-ok aktiv√°l√°sa
            const tabs = document.querySelectorAll('#vehicles-page .tab');
            tabs.forEach(tab => {
                tab.classList.remove('active');
                if (tab.getAttribute('data-tab') === tabName) {
                    tab.classList.add('active');
                }
            });
            
            // Tartalom megjelen√≠t√©se
            const tabContents = document.querySelectorAll('#vehicles-page .tab-content');
            tabContents.forEach(content => {
                content.classList.remove('active');
                if (content.id === `vehicles-${tabName}-tab`) {
                    content.classList.add('active');
                }
            });
        }
        
        function switchPersonnelTab(tabName) {
            // Tab-ok aktiv√°l√°sa
            const tabs = document.querySelectorAll('#personnel-page .tab');
            tabs.forEach(tab => {
                tab.classList.remove('active');
                if (tab.getAttribute('data-tab') === tabName) {
                    tab.classList.add('active');
                }
            });
            
            // Tartalom megjelen√≠t√©se
            const tabContents = document.querySelectorAll('#personnel-page .tab-content');
            tabContents.forEach(content => {
                content.classList.remove('active');
                if (content.id === `personnel-${tabName}-tab`) {
                    content.classList.add('active');
                }
            });
        }
        
        function showNotification(notificationId, message) {
            const notification = document.getElementById(notificationId);
            notification.textContent = message;
            notification.style.display = 'block';
            
            setTimeout(() => {
                notification.style.display = 'none';
            }, 5000);
        }
        
        function generateId() {
            return Date.now().toString(36) + Math.random().toString(36).substr(2);
        }
        
        function formatDate(date) {
            if (!(date instanceof Date)) {
                date = new Date(date);
            }
            return date.toLocaleDateString('hu-HU');
        }
        
        function getVehicleTypeName(type) {
            const types = {
                'autodaru': 'Aut√≥daru',
                'mobil-toronydaru': 'Mobil toronydaru',
                'toronydaru': 'Toronydaru',
                'teherauto': 'Teheraut√≥',
                'kisteher': 'Kisteher',
                'egyeb': 'Egy√©b'
            };
            return types[type] || type;
        }
        
        function getPositionName(position) {
            const positions = {
                'daru-kezel≈ë': 'Daru kezel≈ë',
                'sof≈ër': 'Sof≈ër',
                'm≈±szaki vezet≈ë': 'M≈±szaki vezet≈ë',
                'karbantart√≥': 'Karbantart√≥',
                'egy√©b': 'Egy√©b'
            };
            return positions[position] || position;
        }
        
        function getStatusBadge(date) {
            const today = new Date();
            const expiryDate = new Date(date);
            const daysUntilExpiry = Math.ceil((expiryDate - today) / (1000 * 60 * 60 * 24));
            
            if (daysUntilExpiry < 0) {
                return '<span class="status-badge status-expired">Lej√°rt</span>';
            } else if (daysUntilExpiry <= 30) {
                return '<span class="status-badge status-warning">Hamarosan</span>';
            } else {
                return '<span class="status-badge status-valid">√ârv√©nyes</span>';
            }
        }
        
        function isExpiringSoon(date) {
            const today = new Date();
            const expiryDate = new Date(date);
            const daysUntilExpiry = Math.ceil((expiryDate - today) / (1000 * 60 * 60 * 24));
            
            return daysUntilExpiry <= 30 && daysUntilExpiry >= 0;
        }
        
        // Export√°l√°s funkci√≥
        function exportData() {
            const data = {
                vehicles: vehicles,
                personnel: personnel,
                exportDate: new Date().toISOString(),
                version: '1.0'
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `daru_unio_adatok_${new Date().toISOString().slice(0, 10)}.json`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
            
            showNotification('vehicles-success-notification', 'Adatok sikeresen export√°lva!');
        }
        
        // Import√°l√°s funkci√≥
        function triggerImport() {
            document.getElementById('file-input').click();
        }
        
        function importData(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            if (!confirm('Biztosan import√°lni szeretn√© az adatokat? A megl√©v≈ë adatok fel√ºl√≠r√≥dnak!')) {
                event.target.value = '';
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    
                    // Ellen≈ërz√©s, hogy a f√°jl tartalmazza-e a sz√ºks√©ges adatokat
                    if (data.vehicles && data.personnel) {
                        vehicles = data.vehicles;
                        personnel = data.personnel;
                        
                        localStorage.setItem('vehicles', JSON.stringify(vehicles));
                        localStorage.setItem('personnel', JSON.stringify(personnel));
                        
                        // Friss√≠tj√ºk a felhaszn√°l√≥i fel√ºletet
                        renderVehicles();
                        renderPersonnel();
                        renderHomeDashboard();
                        
                        showNotification('vehicles-success-notification', 'Adatok sikeresen import√°lva!');
                    } else {
                        showNotification('vehicles-error-notification', 'Hib√°s f√°jlform√°tum!');
                    }
                } catch (error) {
                    console.error('Hiba az import√°l√°s sor√°n:', error);
                    showNotification('vehicles-error-notification', 'Hiba t√∂rt√©nt az import√°l√°s sor√°n!');
                }
            };
            
            reader.readAsText(file);
            event.target.value = '';
        }
    </script>
</body>
</html>